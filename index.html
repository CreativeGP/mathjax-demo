<!doctype html>
<html lang="en">
		<head>
				<meta charset="UTF-8"/>
				<title>MathJax Demo</title>

				<script type="text/x-mathjax-config">
				 MathJax.Hub.Config({ tex2jax: { inlineMath: [['$','$'], ["\\(","\\)"]] } });
				</script>
				<script type="text/javascript"
											src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS_CHTML">
				</script>
				<meta http-equiv="X-UA-Compatible" CONTENT="IE=EmulateIE7" />

				<link href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.39.0/codemirror.min.css" rel="stylesheet"/>
				<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.39.0/codemirror.min.js"></script>
				
				<style>
				 textarea {
						 width: 100%;
						 height: 40vh;
				 }
				 .CodeMirror {
						 font-size: 30px;
				 }
				 #view {
						 font-size: 60px;
				 }
				</style>

				<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
				<script>
				 function htmlspecialchars(str){
						 return (str + '').replace(/&/g,'&amp;')
															.replace(/"/g,'&quot;')
															.replace(/'/g,'&#039;')
															.replace(/</g,'&lt;')
															.replace(/>/g,'&gt;'); 
				 }

				 $(function() {
						 let editor = CodeMirror.fromTextArea(document.getElementsByTagName('textarea')[0], {
								 lineNumbers: true
						 });
						 editor.setValue('E = mc^2 \\\\\nm = \\frac{m_0}{\\sqrt{1-\\frac{v^2}{c^2}}}');
						 $('textarea').on('keyup', e => {
								 const key = e.keyCode || e.charCode;

								 if (key == 8 || key == 46) {
										 const code = editor.getValue();
										 $('#view').html(htmlspecialchars(`$${code}$`));
										 MathJax.Hub.Queue(["Typeset",MathJax.Hub]);
								 }
						 });
						 $('textarea').on('input', e => {
								 const code = editor.getValue();
								 $('#view').html(htmlspecialchars(`$${code}$`));
								 MathJax.Hub.Queue(["Typeset",MathJax.Hub]);
						 });
				 });
				</script>
		</head>
		<body>
				<h1 >Interactive LaTeX Editor(MathJax Demo)</h1>
        <p style="position: relative; bottom: 4em; float: right; color: gray"><em>Jul 17 2018  CreativeGP</em></p>

				<textarea>

				</textarea>

				<div id="view">
						$E = mc^2 \\m = \frac{m_0}{\sqrt{1-\frac{v^2}{c^2}}}$
				</div>
		</body>
</html>
